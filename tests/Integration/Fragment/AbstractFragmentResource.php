<?php


namespace App\Tests\Integration\Fragment;


use App\Entity\Position;
use App\Repository\FictionRepository;
use App\Repository\FragmentRepository;
use App\Repository\NarrativeRepository;
use App\Repository\PositionRepository;
use App\Repository\VersionRepository;
use App\Tests\Integration\AbstractIntegrationTest;
use Doctrine\ORM\EntityManagerInterface;

/**
 * Class AbstractNarrativeResourceTest
 * @package App\Tests\Integration\Narrative
 */
class AbstractFragmentResource extends AbstractIntegrationTest
{

    /** @var EntityManagerInterface|object|null  */
    protected $em;

    /** @var array  */
    protected $data;

    /** @var string  */
    protected $title;

    /** @var string  */
    protected $content;

    /** @var FragmentRepository|object|null  */
    protected $fragmentRepository;

    /** @var VersionRepository|object|null  */
    protected $versionRepository;

    /** @var FictionRepository|object|null  */
    protected $fictionRepository;

    public function setUp():void
    {
        parent::setUp();

        $this->content = 'This content is generated by phpunit test';

        $this->data = [
            'uuid' => '6153ca18-47a9-4b38-ae72-29e8340060cb',
            'content' => $this->content,
            'fiction_uuid' => '1b7df281-ae2a-40bf-ad6a-ac60409a9ce6',
            'type' => 'narrative',
            'parent_uuid' => 'de88bad6-9e5d-4af4-ba0c-bbe4dbbf82ff'
        ];

        // we use the container for test of Symfony that let us use "private" services
        $container = self::$container;

        $this->em = $container->get(EntityManagerInterface::class);

        // list of repositories
        $this->fragmentRepository = $container->get(FragmentRepository::class);
        $this->versionRepository = $container->get(VersionRepository::class);
        $this->fictionRepository = $container->get(FictionRepository::class);
    }
}